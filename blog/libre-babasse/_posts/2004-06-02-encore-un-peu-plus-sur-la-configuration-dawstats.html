---
title: Encore un peu plus sur la configuration d'Awstats
---

<p>Il me restait trois petites choses que je voulais faire avec <a hreflang="en" href="http://awstats.sourceforge.net">Awstats</a> et que je n'arrivais pas à faire : </p>\r\n\r\n<dl>\r\n<dt>Faire des stats sur l'ensemble de mes deux serveurs web (HTTP et HTTPS)</dt>\r\n\r\n<dd><p>Par défaut (sous <a href="http://www.debian.org/">Debian</a> en tout cas), ce logiciel vous propose d'analyser le fichier de <a hreflang="fr" href="http://packages.debian.org/stable/admin/logrotate.fr.html" title="Utilitaire de rotation de journaux">log en cours de rotation</a>, ce qui pose des problèmes évident de perte d'information entre une rotation des logs et une mise à jour des statistiques. L'intérêt de cette méthode est un (léger pour mon installation) gain au niveau des performances. Ce gain ne m'intéressant pas, j'ai préféré agréger tous les logs de apache de et apache-ssl. Pour cela, il faut changer la valeur du paramètre <a hreflang="en" href="http://awstats.sourceforge.net/docs/awstats_config.html#LogFile"><code>LogFile</code></a>, en mettant à la place de la valeur par défaut <code>"/usr/share/doc/awstats/examples/logresolvemerge.pl /var/log/apache/access.log* /var/log/apache-ssl/access.log* |"</code>.</p>\r\n\r\n<p>Si vous aviez déjà analysé des données, il faut mettre à zéro les informations d'historique d'awstats, en supprimant les fichiers de la forme <var>awstatsMMAAAA.www.domaine.org.txt</var> situés dans le répertoire <code>/usr/lib/cgi-bin/</code> (cet emplacement peut avoir été modifié en modifiant la valeur de <a hreflang="en" href="http://awstats.sourceforge.net/docs/awstats_config.html#DirData"><code>DirData</code></a> dans la configuration).</p></dd>\r\n\r\n<dt>Mettre à jour awstats régulièrement</dt>\r\n\r\n<dd><p>Pour cela, il faut évidemment utiliser l'excellent <a hreflang="fr" href="http://packages.debian.org/stable/admin/cron.fr.html" title="Gestion des tâches de fond à lancement périodique">Cron</a>. Pour aller droit au but, il suffit d'ajouter <code>0 * * * * /usr/lib/cgi-bin/awstats.pl -config=www.domaine.org -update &gt;/dev/null</code>.</p></dd>\r\n\r\n<dt>Ne pas faire apparaître mes ordinateurs</dt>\r\n\r\n<dd><p>Parce que je connais mon utilisation de mes serveurs, et parce que je ne veux pas pourrir les statistiques avec ma consultation continue de mes mails, je ne veux pas que mes ordinateurs apparaissent dans les listes générées par Awstats. Pour cela, il faut utiliser <a hreflang="en" href="http://awstats.sourceforge.net/docs/awstats_config.html#SkipHosts" title="Awstats Documentation - SkipHosts"><var>SkipHosts</var></a>.</p></dd>\r\n</dl>
