---
title: Bilan des réflexions PHP
---

<p>Merci pour <a href="http://www.pikolint.org/~clark/blog/?2005/05/30/147-trucs-et-astuces-pour-projet-en-php#co" title="Trucs et astuces pour projet en PHP" hreflang="fr">tous vos commentaires</a>, mails, discussions téléphoniques. J'ai grâce à vous pu me faire une idée un peu plus précise de la façon dont je vais organiser ma future application. Pour faire rapide, je compte développer selon les préceptes de la méthode <em><a href="http://xprogramming.com/" hreflang="en">eXtreme Programming</a></em>, et coder en respectant le <em><a href="http://java.sun.com/blueprints/patterns/MVC.html" hreflang="en">modèle MVC</a></em>. Voici donc un résumé de mes conclusions et des différentes briques que j'ai retenu :</p><h3>Outils de développement et librairies</h3><dl><dt><a href="http://www.eclipse.org" hreflang="en">Eclipse</a></dt><dd>C'est pour moi l'éditeur incontournable, à la fois parce que je l'utilise tout le temps, et que je le maîtrise bien, mais aussi parce que c'est probablement le plus évolutif, et que j'ai de bonnes chances de pouvoir faire plein de choses différentes avec. Par exemple, la gestion du <a href="http://www.gnu.org/software/cvs/" hreflang="en"><acronym lang="en" title="Concurrent Versioning System">CVS</acronym></a> est intégrée en standard, mais j'ai pu aussi installer <a href="http://phpeclipse.sourceforge.net/" hreflang="en">PHPEclipse</a> pour faire du <a href="http://www.php.net" hreflang="en"><acronym lang="en" title="PHP Hypertext Processor">PHP</acronym></a>. Si je veux un jour passer à <a href="http://subversion.tigris.org/" hreflang="en">Subversion</a>, je pourrai garder mes habitudes de travail grâce à <a href="http://subclipse.tigris.org/" hreflang="en">Subclipse</a>. Incontournable je vous dis !</dd><dt><a href="http://www.gnu.org/software/cvs/" hreflang="en">CVS</a></dt><dd>Vous l'aurez compris à ce que j'ai écrit plus haut, entre CVS et <a href="http://subversion.tigris.org/" hreflang="en">Subversion</a>, mon coeur balance. Pour l'instant, il est plus simple de rester à CVS. Mais cela m'étonnerait que je n'essaie pas Subversion avant la fin du projet :)</dd><dt><a href="http://ant.apache.org/" hreflang="en">Ant</a></dt><dd>Le <a href="http://www.gnu.org/software/make/" hreflang="en">make</a> du java est parfaitement intégré à Eclipse, et très utile pour tous les travaux de compilation, tests automatiques, packaging, etc... A noter : certaines librairies que je vais utiliser (notamment Propel, voir plus bas) ont besoin de <a href="http://phing.info/" hreflang="en">phing</a>, qui est sensé être à PHP ce que Ant est à Java.</dd><dt><a href="http://smarty.php.net/" hreflang="en">Smarty</a></dt><dd>C'est apparemment <em>LE</em> moteur de template en PHP. Effectivement, il a l'air très puissant, extensible. Le seul risque selon certains est qu'il l'est presque trop, et que bien qu'il soit là pour implémenter une séparation stricte entre traitement et présentation, une dérive à ce niveau est possible.</dd><dt><a href="http://pear.php.net/package/Auth" hreflang="en">PEAR::Auth</a></dt><dd>Je suis étonné par le peu de librairies un peu étoffée qui soit disponible pour gérer l'authentification, la gestion des mot de passe, etc... Cela m'ennuie un peu parce que je trouve qu'il est facile de faire des bêtises au niveau sécurité en manipulant tout cela soit même, et que c'est tellement classique comme fonctionnalité qu'il semble logique de factoriser toutes les bonnes pratiques dans quelques librairies. Pour l'instant, je vais essayer <a href="http://pear.php.net/package/Auth" hreflang="en">PEAR::Auth</a> parce que c'est ce qui a l'air de s'approcher le plus du standard, et que la librairie sera probablement un minimum mise à jour. Si je ne suis pas convaincu, je regarderai du côté de <a href="http://freshmeat.net/projects/php_lib_login/" hreflang="en">phpLibLogin</a>, qui est utilisé pour <a href="http://xpweb.sourceforge.net/" hreflang="en">XPWeb</a>.</dd><dt><a href="http://pear.php.net/package/Log" hreflang="en">PEAR::Log</a></dt><dd>Classique. Permet d'avoir un système de gestion de log un peu centralisé, fiable, évolutif. Je ne pense pas que je m'en servirai énormément au début, mais j'y viendrai.</dd><dt><a href="http://pear.php.net/package/Spreadsheet_Excel_Writer" hreflang="en">PEAR::Spreadsheet_Excel_Writer</a></dt><dd>C'est une librairie rendue nécessaire parce que le but de ce logiciel est de remplacer un logiciel actuellement utilisé. Dans le cadre de ce logiciel, ma mère a pris l'habitude de manipuler des fichiers Excel. Il faudra donc (au moins dans un premier temps) faciliter la transition en ne bousculant pas les habitudes qui n'ont pas à l'être.</dd><dt>Internationalisation</dt><dd>Ce n'est clairement pas la priorité du projet. Mais cela sera sans doute un aspect à ne pas négliger. J'utiliserai ce qui est <em>a priori</em> le standard open source : <a href="http://www.gnu.org/software/gettext/" hreflang="en">GetText</a>, qui peut être <a href="http://www.php.net/gettext" hreflang="en">intégré dans PHP</a>.</dd></dl><h3>Persistence des données</h3><dl><dt><a href="http://www.fabforce.net/dbdesigner4/" hreflang="en">DBDesigner4</a></dt><dd>Pour la conception du modèle de données, quelle que soit l'implémentation utilisée, je préfère avoir un graphique qu'un fichier <acronym lang="en" title="eXtensible Markup Language">XML</acronym> ou <acronym lang="en" title="Structured Query Language">SQL</acronym> pour décrire le modèle. Mais les logiciels libres pour faire cela sont plutôt rares... Du moins c'est ce que je croyais. Celui-là est vraiment sympa. Je pense même que je pourrais peut-être l'étendre pour qu'il puisse générer automatiquement les fichiers XML de description des données (voir ci-dessous). Le problème majeur est qu'il se concentre sur le moteur de base de données <a href="http://www.mysql.com/" hreflang="en">MySQL</a>, et qu'il pourrait s'avérer limité pour ce qui est des procédures stockées et des transactions (voir ci-dessous).</dd><dt><acronym lang="en" title="Data Access Objects">DAO</acronym></dt><dd>Parce qu'ils permettent d'être plus efficaces, que la gestion métier des objets devrait être relativement simple, et parce que cela permet que quelqu'un qui ne s'y connait pas énormément puisse quand même ajouter des champs aux objets, je voulais travailler avec un générateur de DAO. Si l'on ne veut pas utiliser un framework trop complexe et si en plus on veut être en PHP5, le nombre de bibliothèques possibles est assez limité. Mon choix s'est porté sur <a href="http://propel.phpdb.org/trac/" hreflang="en">Propel</a> qui a l'air de faire exactement ce que je veux.</dd><dt>Moteur de base de données</dt><dd>Pour des raisons évidente de simplicité de mise en oeuvre à court terme, et parce qu'il serait plus simple de déployer ce moteur en production, je vais utiliser <a href="http://www.mysql.com/" hreflang="en">MySQL</a> pour le moteur de base de données. Néanmoins, et pour les même raisons, je vais utiliser la version 4.x. Cela veut dire par exemple que les procédures stockées ne seront pas utilisables. Or, à moyen terme, il faudra faire des calculs assez intensifs qui nécessiteront peut être de telles procédures stockées. Si cela est nécessaire, le passage à <a href="http://www.postgresql.org/" hreflang="en">postgreSQL</a> est envisagé.</dd><dt>Couche d'abstraction</dt><dd>Parce que c'est une bonne pratique de programmation, et parce que cela rendra plus facile une éventuelle migration de l'application vers postgreSQL, il me faut une librairie pour faire abstraction du moteur de base de données. Pour sa compatibilité avec PHP5, son apparente puissance, et pour son joli nom, j'ai choisi <a href="http://creole.phpdb.org/wiki/" hreflang="en">Creole</a>.</dd><dt>Administration de la base de données</dt><dd>Parce que c'est un logiciel excellent, puissant, facile à installer et (assez) facile à utiliser, <a href="http://www.phpmyadmin.net/home_page/index.php" hreflang="en">phpMyAdmin</a> était exactement ce qu'il me fallait pour administrer la base de données, et éventuellement gérer les données dans un premier temps. Si il faut passer à postgreSQL, le logiciel retenu sera son équivalent (en moins attractif quand même) : <a href="http://phppgadmin.sourceforge.net/" hreflang="en">phpPgAdmin</a>.</dd></dl><h3>Suivi de projet</h3><dl><dt><a href="http://xpweb.sourceforge.net/" hreflang="en" title="Manage your extreme programming projetcts">XPWeb</a></dt><dd>Il est plutôt simple à installer et à utiliser. Il est complètement orienté gestion de projet en <em>eXtreme programming</em>. Bref, c'est exactement ce qu'il me fallait. Et comme j'avais promis à <a href="http://olivier.chirouze.online.fr/" hreflang="fr" title="Olivier Chirouze">Olive</a> que je jetterais un coup d'oeil sur l'accessibilité du logiciel, voilà le bon prétexte pour m'y mettre enfin !</dd><dt><a href="http://www.mantisbt.org/" hreflang="en" title="Mantis Bug Tracking System">Mantis</a></dt><dd>Je n'ai pas vraiment hésité pour le système de gestion des erreurs de l'application. Je l'ai déjà utilisé et je sais qu'il est simple, spécialisé et très clair. C'est exactement ce que je cherchais. L'autre alternative dont j'ai entendu parler est le très connu <a href="http://www.bugzilla.org/" hreflang="en">Bugzilla</a> de la fondation <a href="http://www.mozilla-europe.org/fr/" hreflang="fr">Mozilla</a>. Mais sa puissance est au prix d'une complication énorme et je n'ai pas besoin d'un truc aussi puissant pour mon application.</dd><dt><a href="http://www.opquast.com/mon-opquast/" hreflang="fr">Opquast</a></dt><dd><q cite="http://www.opquast.com/mon-opquast/">Mon-Opquast est un outil de gestion de la qualité des sites Internet</q>. Il va me permettre de suvire la compatibilité de mon site avec les standards du <a href="http://www.w3.org/" hreflang="en">W3C</a> (voir plus bas).</dd><dt>Documentation</dt><dd>Hors le schéma des structures de données (voir plus haut), je voudrais avoir une documentation du code un peu évoluée. Je vais donc utiliser <a href="http://www.stack.nl/~dimitri/doxygen/" hreflang="en">Doxygen</a>, à travers son <a href="http://home.gna.org/eclox/" hreflang="en" title="Eclox">plugin pour Eclipse</a>. Selon les besoins, <a href="http://xpweb.sourceforge.net/news.php#news_45" hreflang="en">j'intégrerai</a> peut-être un <a href="http://fr.wikipedia.org/wiki/Wiki" hreflang="fr">wiki</a> (mais cela ne devrait pas avoir lieu vu la méthode de développement et mes relations peu contractuelles avec le <em>client</em>).</dd></dl><h3>Tests automatiques</h3><dl><dt>Tests unitaires</dt><dd>Pour les tests unitaires, rien de bien original, on va se tourner vers le classique <a href="http://phpunit.sourceforge.net/" hreflang="en">PHPUnit</a>. Le plugin <a href="http://phpeclipse.sourceforge.net/" hreflang="en">PHPEclipse</a> permet de l'utiliser très facilement depuis Eclipse.</dd><dt>Tests fonctionnels</dt><dd><a href="http://htmlunit.sourceforge.net/" hreflang="en">HTMLUnit</a> a l'air assez intéressant et très puissant. En plus, il est proche du <acronym lang="en" title="HyperText Markup Language">HTML</acronym>, ce qui m'arrange vu que je connais bien. Par contre, je n'ai jamais utilisé de tests fonctionnels automatiques, donc je ne suis pas trop sûr que cela suffira. Si besoin est, je regarderai du côté de <a href="http://www.incanica.com/itp.html" hreflang="en">Incanica ITP</a>, <a href="http://httpunit.sourceforge.net/" hreflang="en">HTTPUnit</a>, <a href="http://grinder.sourceforge.net/" hreflang="en">Grinder</a> ou <a href="http://jakarta.apache.org/jmeter/" hreflang="en">JMeter</a>.</dd></dl><h3>Standards de code</h3><dl><dt>Structure du code PHP</dt><dd>J'ai trouvé ce document qui semble bien résumer la <a href="http://b2evolution.net/man/2004/06/16uid/coding_standard_gelines" hreflang="en" title="Coding Standard Guidelines">base d'un bon code PHP</a>. <a href="http://www.aittouati.com/" hreflang="fr">Bertrand</a> m'en a fourni une pléthore, tous aussi bons les uns que les autres.</dd><dt>Sécurité</dt><dd>J'avais déjà eu l'occasion d'en parler, <a href="http://www.pikolint.org/~clark/blog/?2005/06/10/149-php-security-consortium" hreflang="fr" title="PHP Security Consortium">j'ai découvert</a> un manuel très intéressant sur <a href="http://phpsec.org/projects/guide/" hreflang="en" title="PHP Security Guide">la sécurité PHP</a>, et j'entend appliquer toutes les méthodes qui y sont décrites.</dd><dt>Standards du web</dt><dd>Qui en aurait douté ; je me propose de produire des pages répondant aux standards du web. Pour le contenu, je vise le <a href="http://www.w3.org/TR/xhtml1/" hreflang="en" title="XHTML™ 1.0 The Extensible HyperText Markup Language (Second Edition)"><acronym lang="en" title="eXtensible HyperText Markup Language">XHTML</acronym> Strict 1.0</a> (pas de 1.1, parce que <a href="http://forum.alsacreations.com/faq/#item42" hreflang="en">la déclaration de contenu xml pour du html</a> peut être problématique). Pour la présentation, je vise le <a href="http://www.w3.org/TR/REC-CSS2/" hreflang="en"><acronym lang="en" title="Cascading Style Sheets">CSS</acronym> 2</a>. Et pour la dynamique, le <a href="http://www.w3.org/DOM/DOMTR#dom2" hreflang="en"><acronym lang="en" title="Document Object Model">DOM</acronym> niveau 2</a>, en s'assurant que tout dynamisme n'est jamais obligatoire pour faire fonctionner l'application. Ce qui m'amène naturellement au problème de l'accessibilité. Je vise le niveau Or évidemment, et après relecture des <a href="http://www.accessiweb.org/fr/Label_Accessibilite/criteres_accessiweb/92_accessiweb_lineaire/" hreflang="fr">critères</a>, cela me semble tout à fait atteignable pour le type de site visé. Et puis bon, ça crânerait bien quand même ;)</dd><dt>HTML Sémantique</dt><dd>Pour atteindre les buts ci-dessus, il est à mes yeux quelque chose d'essentiel, faire du HTML sémantique. Mes références en la matière sont <a href="http://www.minet.net/spip/article.php3?id_article=114" hreflang="fr" title="Fiche pratique du HTML sémantique">moi-même</a> (eh ouais !) et surtout <a href="http://openweb.eu.org/structure/" hreflang="fr" title="La structuration des documents HTML-XHTML">OpenWeb</a>.</dd></dl><h3>Autres liens intéressants mais que je n'utiliserai pas</h3><ul><li>Parmi les frameworks intéressants que j'ai pu trouver, il y a <a href="http://binarycloud.com/" hreflang="en">BinaryCloud</a>, <a href="http://www.mojavi.org/" hreflang="en">Mojavi</a> et <a href="http://www.copix.org/" hreflang="en">Copix</a>. Leurs défauts à tous est le problème du support de PHP5 et leur trop grande complexité première.</li><li><a href="http://projects.edgewall.com/trac/" hreflang="en">Trac</a> est un outil de suivi de projet très simple, ergonomique et puissant.</li><li>Cela n'a rien à voir, mais j'ai découvert <a href="http://maven.apache.org/" hreflang="en">Maven</a>, que je ne connaissais pas et qui a l'air très puissant pour les projets pur Java.</li></ul>
